<div class="row g-2">
    {%- for tile in site.data.tiles -%}
    {%- assign filepath = "part/tile-" | append: tile.type | append: ".html" -%}
    {%- include {{ filepath }} data=tile.data horizontal=tile.horizontal polygon=tile.polygon width=tile.width -%}
    {%- endfor -%}
</div>

<script type="module">
    let offcanvas = $('#menu');

    // Auto resize icons
    function resizeIcons() {
        $('.tile-button .sketcho').each(function (_, el) {
            let icon = $(el),
                button = icon.parents('.tile-button').first(),
                label = button.find('.tile-label').first(),
                space;

            if (button.hasClass('tile-button-half-square'))
                space = button.width() - (parseFloat(button.css('padding-top')) * 4) - label.outerHeight();
            else if (button.hasClass('tile-button-half-slim'))
                space = (button.width() / 2) - (parseFloat(button.css('padding-top')) * 4) - label.outerHeight();

            icon.css({
                'font-size': space,
                'line-height': '100%',
            });
        });
    }

    // resize half slim buttons
    const SPACE = '0.5rem'; // m-between-2
    function resizeButtons() {
        $('.tile-button-half-slim').each(function (_, el) {
            let button = $(el),
                width = button.outerWidth();
            button.cssStyle('height', 'calc((' + width + 'px - ' + SPACE + ') / 2)', true);
        });
    }

    $(window).resize(resizeButtons);
    offcanvas.on('shown.bs.offcanvas', resizeButtons);
    resizeButtons();

    // close menu on click
    $('.tile-button').on('click', function () {
        offcanvas.offcanvas('hide');
    });
</script>