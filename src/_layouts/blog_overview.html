<!DOCTYPE html>
<html lang="en">
<head>
    {% include basics.html %}
    {% include main/head.html %}
</head>
{% if page.external_link==nil and page.is_separator!=true -%}
<body data-role="page" class="position-relative">

    {%- assign postlist_id = page.postlist_id -%}
    {%- assign posts_intro = page.posts_intro | default: 50 -%}

    {%- for i_page in site.pages -%}
    {%- assign id = i_page.url | split: '/' | last -%}
    {%- if id == "index.html" -%}
    {%- assign id = i_page.url | split: '/' -%}
    {%- assign tmp = id.size | minus: 2 -%}
    {%- assign id = id[tmp] -%}
    {%- endif -%}
    {%- if id == postlist_id -%}
    {%- assign postlist_page = i_page -%}
    {%- endif -%}
    {%- endfor -%}

    {% include main/menu.html active=postlist_id %}
    {% include main/topbar.html active=postlist_id %}

    <noscript>
        <div class="alert alert-danger" role="alert">
            This page requires JavaScript to work correctly.
            Please enable JavaScript in your browser and reload the page.
        </div>
    </noscript>

    {% assign id = page.url | split: '/' | last | default: "home" %}
    <main class="container md-container m-between-5 mt-4 mb-5 pb-5" id="page-{{ id }}">
        <div class="mb-3">
            <h1>{{ page.header | default: page.title }}</h1>
        </div>

        {%- if page.render_this == "before" or page.render_this == true -%}
        {% include content.html %}
        {%- endif -%}

        <div class="blog-overview">

            <h2 class="d-none">List of Posts</h2>
            <div class="list-group list-group-flush mx-n4 mb-4">

                {%- assign posts = paginator.posts | default: site.posts -%}
                {% for post in posts %}
                <a href="{{ post.url }}" class="list-group-item list-group-item-action px-4 py-4">
                    <article class="post-preview">
                        <div class="mb-4">
                            {% include main/post-header.html post=post head_level=3 %}
                        </div>

                        {{ post.content | truncatewords: posts_intro | strip_html | xml_escape}}
                    </article>
                    <div class="text-end link-primary">Read more</div>
                </a>
                {% endfor %}

            </div>

            {% if paginator and paginator.total_pages > 1 %}
            <div class="d-flex">
                {% if paginator.previous_page %}
                <a href="{{ paginator.previous_page_path }}" class="btn btn-outline-primary w-fix-lg me-auto">Newer Posts</a>
                {% endif %}
                {% if paginator.next_page %}
                <a href="{{ paginator.next_page_path }}" class="btn btn-outline-primary w-fix-lg ms-auto">Older Posts</a>
                {% endif %}
            </div>
            {% endif %}

            <h2>Tags</h2>
            <ul>
                {% assign sorted_tags = site.tags | sort %}
                {% for tag in sorted_tags %}
                <li><a href="{{ relBase }}{{ site.taglist.root }}{{ tag[0] | slopify }}">
                    {{ tag[0] }}
                </a></li>
                {% endfor %}
            </ul>

            <h2>Categories</h2>
            <ul>
                {% assign sorted_cats = site.categories | sort %}
                {% for cat in sorted_cats %}
                <li><a href="{{ relBase }}{{ site.categorylist.root }}{{ cat[0] | slopify }}">
                    {{ cat[0] }}
                </a></li>
                {% endfor %}
            </ul>
        </div>

        {%- if page.render_this == "after" -%}
        {% include content.html %}
        {%- endif -%}
    </main>

    {% include main/cookie-hint.html %}
    {% include main/footer.html %}
</body>
{% endif -%}
</html>